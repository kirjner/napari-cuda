# napari-cuda Environment Variables
# Copy to .env and adjust for your system

# ==========================================
# CUDA Configuration (usually set by module load)
# ==========================================

# CUDA installation path
CUDA_HOME=/usr/local/cuda-12.4
CUDA_PATH=/usr/local/cuda-12.4

# CUDA libraries
LD_LIBRARY_PATH=$CUDA_HOME/lib64:$LD_LIBRARY_PATH
PATH=$CUDA_HOME/bin:$PATH

# For PyCUDA compilation
CUDA_INC_DIR=$CUDA_HOME/include
CUDA_LIB_DIR=$CUDA_HOME/lib64

# cuDNN path (if needed)
CUDNN_PATH=/usr/local/cudnn-8.9

# ==========================================
# GPU Configuration
# ==========================================

# Select specific GPU (comma-separated for multiple)
CUDA_VISIBLE_DEVICES=0

# GPU memory allocation
CUDA_LAUNCH_BLOCKING=0
CUDA_DEVICE_ORDER=PCI_BUS_ID

# ==========================================
# Headless OpenGL Configuration
# ==========================================

# Qt platform for headless operation
QT_QPA_PLATFORM=offscreen

# OpenGL backend (choose one)
# PYOPENGL_PLATFORM=egl     # For EGL (NVIDIA GPUs)
# PYOPENGL_PLATFORM=osmesa  # For OSMesa (software)
PYOPENGL_PLATFORM=egl

# Virtual display (if using Xvfb)
DISPLAY=:99

# ==========================================
# NVENC Configuration (optional)
# ==========================================

# NVENC SDK path (if manually installed)
NVENC_SDK_PATH=/opt/nvidia/video-codec-sdk

# ==========================================
# Network Configuration
# ==========================================

# Server binding
NAPARI_CUDA_HOST=0.0.0.0
NAPARI_CUDA_STATE_PORT=8081
NAPARI_CUDA_PIXEL_PORT=8082

# ==========================================
# Logging and Debug
# ==========================================

# Log level (DEBUG, INFO, WARNING, ERROR)
NAPARI_CUDA_LOG_LEVEL=INFO

# Debug mode (enables verbose output)
NAPARI_CUDA_DEBUG=0

# Performance profiling
NAPARI_CUDA_PROFILE=0

# Log directory
NAPARI_CUDA_LOG_DIR=./logs

# ==========================================
# Performance Tuning
# ==========================================

# Frame rate target
NAPARI_CUDA_TARGET_FPS=60

# Maximum encoding threads
NAPARI_CUDA_ENCODE_THREADS=2

# Frame queue size
NAPARI_CUDA_FRAME_QUEUE_SIZE=3

# Enable frame skipping
NAPARI_CUDA_SKIP_FRAMES=1

# ==========================================
# Development Settings
# ==========================================

# Use mock CUDA for testing without GPU
NAPARI_CUDA_MOCK_GPU=0

# Save captured frames for debugging
NAPARI_CUDA_SAVE_FRAMES=0
NAPARI_CUDA_FRAME_DIR=./frames